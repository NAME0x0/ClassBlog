<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CST1340 Blog</title>
    <link rel="stylesheet" href="{{ '/style.css' | relative_url }}">
</head>
<body>
    <main>
        <header>
            <button id="theme-toggle" aria-label="Toggle theme">ðŸŒ“</button>
            <h1>CST1340</h1>
            <p>Academic Blog by Muhammad Afsah Mumtaz</p>
        </header>

        <section class="posts">
            {% assign sorted_posts = site.posts | sort: 'date' | reverse %}
            {% for post in sorted_posts %}
            <article class="post-card">
                <div class="post-content">
                    <time>{{ post.date | date: "%Y-%m-%d" }}</time>
                    <h2><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h2>
                </div>
            </article>
            {% endfor %}
        </section>
    </main>

    <script>
        const toggle = document.getElementById('theme-toggle');
        const html = document.documentElement;
        
        // Check saved theme or system preference
        const savedTheme = localStorage.getItem('theme') || 
            (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        html.setAttribute('data-theme', savedTheme);

        toggle.addEventListener('click', () => {
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        });
    </script>
</body>
</html>
